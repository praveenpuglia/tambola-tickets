(function(e){function t(t){for(var r,o,c=t[0],s=t[1],u=t[2],f=0,p=[];f<c.length;f++)o=c[f],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&p.push(i[o][0]),i[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);l&&l(t);while(p.length)p.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,c=1;c<n.length;c++){var s=n[c];0!==i[s]&&(r=!1)}r&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},i={app:0},a=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/tambola-tickets/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=s;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0cb3":function(e,t,n){"use strict";var r=n("6675"),i=n.n(r);i.a},"3b4c":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[e.updateExists?n("div",{staticClass:"app-update"},[e._v(" ðŸŽ‰ New Version Available! "),n("button",{on:{click:e.refreshApp}},[e._v(" Refresh ")])]):e._e(),n("div",{staticClass:"actions no-print"},[n("div",{staticClass:"player-details"},[n("label",{staticClass:"control-group player-details__player"},[n("span",[e._v("Player")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.playerName,expression:"playerName"}],staticClass:"control",attrs:{type:"text",size:"16",placeholder:"Player Name",name:"playerName"},domProps:{value:e.playerName},on:{input:function(t){t.target.composing||(e.playerName=t.target.value)}}})]),n("label",{staticClass:"control-group player-details__tickets"},[n("span",[e._v("Tickets")]),n("div",{staticClass:"control"},e._l(6,(function(t){return n("span",{key:t,staticClass:"flex align-center"},[e._v(e._s(t)+" "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.ticketCount,expression:"ticketCount",modifiers:{number:!0}}],staticClass:"ml-2",attrs:{type:"radio"},domProps:{value:t,checked:e._q(e.ticketCount,e._n(t))},on:{change:function(n){e.ticketCount=e._n(t)}}})])})),0)])]),n("div",{staticClass:"buttons"},[n("button",{staticClass:"regenerate",on:{click:e.regenerate}},[e._v("New Ticket")]),n("button",{staticClass:"print",on:{click:e.print}},[e._v("PDF")]),n("button",{staticClass:"screenshot",on:{click:e.download}},[e._v("Share")])]),e._e()]),n("TicketPage",{key:"page_1_"+e.timestamp,attrs:{count:e.ticketCount,player:e.playerName,"page-color":e.getRandomColor()}})],1)},a=[],o=(n("99af"),n("d3b7"),n("25f0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ticket-page",style:{"background-color":e.pageColor}},e._l(e.tickets,(function(t,r){return n("Ticket",{directives:[{name:"show",rawName:"v-show",value:r<e.count,expression:"index < count"}],key:r,attrs:{player:e.player,numbers:t}})})),1)}),c=[],s=(n("cb29"),n("4de4"),n("7db0"),n("c740"),n("0481"),n("4160"),n("a630"),n("caad"),n("d81d"),n("fb6a"),n("a434"),n("4069"),n("a9e3"),n("6062"),n("2532"),n("3ca3"),n("159b"),n("ddb0"),n("2909")),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ticket"},[n("div",{staticClass:"ticket__meta"},[n("small",{staticClass:"ticket__meta-item ticket__meta-name"},[e._v(e._s(e.player))]),n("small",{staticClass:"ticket__meta-item"},[e._v(e._s(e.hash.toUpperCase()))])]),n("table",{staticClass:"ticket__table"},e._l(e.sortedNumbers,(function(t,r){return n("tr",{key:r},e._l(t,(function(t,i){return n("td",{key:i},[e.sortedNumbers[r][i]?n("span",[e._v(" "+e._s(e.sortedNumbers[r][i])+" ")]):e._e()])})),0)})),0)])},l=[],f=(n("ac1f"),n("1276"),n("498a"),n("8634")),p=n.n(f),d=n("a3cc"),m={name:"Ticket",inject:["claim"],props:{numbers:{type:Array,required:!0},player:{type:String}},computed:{hash:function(){return p()(this.numbers)},claims:function(){return this.claim.input.split(",").map((function(e){return e.trim()}))},sortedNumbers:function(){var e=Object(d["a"])(this.numbers);return e.map((function(e){var t=e.filter(Boolean);if(3===t.length)return e.sort();if(2===t.length){var n=e.findIndex((function(e){return 0===e})),r=[0,1,2];r.splice(n,1);var i=r[0],a=r[1];if(e[i]>e[a]){var o=e[i];e[i]=e[a],e[a]=o}}return e})),Object(d["a"])(e)}}},h=m,g=(n("e810"),n("2877")),v=Object(g["a"])(h,u,l,!1,null,"0bf52147",null),b=v.exports,k=n("71d3"),y={name:"TicketPage",components:{Ticket:b},props:{pageColor:String,player:{type:String,default:"Unknown Player"},count:{default:6,type:Number}},data:function(){return{pickedNumbers:[],trials:0}},computed:{tickets:function(){return this.getTickets()},sets:function(){for(var e=this.allNumbers.slice(),t=[],n=0;n<9;n++)0===n?t.push(e.splice(0,9)):8===n?t.push(e):t.push(e.splice(0,10));return t},allNumbers:function(){return new Array(90).fill(0).map((function(e,t){return t+1}))}},methods:{getTickets:function(){var e=this;this.trials=0;var t=this.allNumbers,n=this.getNewArray(6).map((function(){return e.getNewTicket()})),r=n.map((function(r,i){if(n.length-1===i){var a=new Set(t),o=new Set(e.pickedNumbers),c=Array.from(new Set(Object(s["a"])(a).filter((function(e){return!o.has(e)})))),u=e.getNewTicketFromList(c);r=Object(s["a"])(u)}else try{r=e.genRandomizedTicket()}catch(l){return console.error(l),[]}return r})),i=r.map((function(t){return e.validateTicket(t)})),a=6!==i.filter(Boolean).length;if(a){this.pickedNumbers=[];var o=this.getTickets();return o}return r},genRandomizedTicket:function(){if(20===this.trials)throw new Error("Can't generate ticket. Try again!");this.trials++;var e=this.getNewTicket();while(this.getTicketNumbersCount(e)<15){var t=this.pickRandom();if(!this.ifTicketHasNumber(e,t)){var n=this.getAvailableRowIndex(e),r=this.getBelongingColumnIndex(t);this.canPlaceNumber(e,n,r)&&(this.placeNumber(t,e,n,r),this.pickedNumbers.push(t))}}var i=this.validateTicket(e);if(i)return e;var a=e.flat();return this.pickedNumbers=this.pickedNumbers.filter((function(e){return!a.includes(e)})),e=this.genRandomizedTicket(),e},pickRandom:function(){var e=new Set(this.allNumbers),t=new Set(this.pickedNumbers),n=Array.from(new Set(Object(s["a"])(e).filter((function(e){return!t.has(e)})))),r=n[Math.floor(Math.random()*n.length)];return r},validateTicket:function(e){var t=this.getTicketNumbersCount(e);if(15!==t)return!1;var n=e.find((function(e){return 5!==e.filter(Boolean).length}));if(n)return!1;for(var r=[],i=function(t){var n=e.map((function(e){return e[t]})).filter(Boolean);r.push(n)},a=0;a<9;a++)i(a);var o=r.find((function(e){return 0===e.length}));return!o},ifTicketHasNumber:function(e,t){return e.flat().includes(t)},getAvailableRowIndex:function(e){var t=this.getTicketNumbersCount(e);return t<5?0:t>=5&&t<10?1:2},getTicketNumbersCount:function(e){return e.flat().filter(Boolean).length},getBelongingColumnIndex:function(e){return this.sets.findIndex((function(t){return t.includes(e)}))},canPlaceNumber:function(e,t,n){return!e[t][n]},placeNumber:function(e,t,n,r){t[n][r]=e},getNewTicket:function(){var e=this;return this.getNewArray(3).map((function(){return e.getNewArray(9)}))},getNewArray:function(e){return new Array(e).fill(0)},getNewTicketFromList:function(e){var t=this,n=this.getNewTicket();return e=Object(k["a"])(e),e.forEach((function(e){for(var r=0,i=0;i<3;i++){var a=t.getBelongingColumnIndex(e),o=n[i].filter(Boolean).length;if(!(o>=5)&&t.canPlaceNumber(n,i,a)){r=i,n[r][a]=e;break}}})),n}}},w=y,N=(n("0cb3"),Object(g["a"])(w,o,c,!1,null,"26c26b52",null)),_=N.exports,T=n("70b0"),C=n.n(T),x=["azure","honeydew","lavenderblush","ivory","aliceblue","seashell"],j={name:"App",provide:function(){return{claim:this.claim}},components:{TicketPage:_},created:function(){var e=this;document.addEventListener("swUpdated",this.showRefreshUI,{once:!0}),navigator.serviceWorker.addEventListener("controllerchange",(function(){e.refreshing||(e.refreshing=!0,window.location.reload())}))},computed:{ticketTitle:function(){return"".concat(this.playerName," - ").concat(this.ticketCount," Tickets - ").concat((new Date).toString().substring(4,10))}},metaInfo:function(){return{title:this.ticketTitle,titleTemplate:"%s | Tambola Tickets"}},data:function(){return{timestamp:(new Date).getTime(),ticketCount:6,playerName:"",updateExists:!1,registration:null,refreshing:!1,claim:{input:""}}},methods:{download:function(){var e=this;navigator.canShare?C.a.toBlob(document.querySelector(".ticket-page")).then((function(t){var n=new File([t],"".concat(e.ticketTitle,".jpg"),{type:"image/jpeg"}),r=[n];navigator.canShare({files:r})?navigator.share({text:e.ticketTitle,files:r}).then((function(){return console.log("Successful share")})).catch((function(e){console.log("Error sharing",e)})):alert("Web Share API is not supported in your browser.")})):C.a.toJpeg(document.querySelector(".ticket-page")).then((function(t){var n=document.createElement("a");n.download="".concat(e.ticketTitle,".jpg"),n.href=t,document.body.append(n),n.click(),n.remove()}))},showRefreshUI:function(e){this.registration=e.detail,this.updateExists=!0},refreshApp:function(){this.updateExists=!1,this.registration&&this.registration.waiting&&this.registration.waiting.postMessage("skipWaiting")},getRandomColor:function(){var e=Math.floor(Math.random()*x.length);return x[e]},regenerate:function(){this.timestamp=(new Date).getTime()},print:function(){window.print()}}},O=j,S=(n("58b4"),Object(g["a"])(O,i,a,!1,null,"bf94e3b6",null)),P=S.exports,A=n("58ca"),E=(n("fb98"),n("9483"));Object(E["a"])("".concat("/tambola-tickets/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(e){console.log("Service worker has been registered."),setInterval((function(){e.update()}),36e5)},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(e){console.log("New content is available; please refresh."),document.dispatchEvent(new CustomEvent("swUpdated",{detail:e}))},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),r["a"].use(A["a"],{refreshOnceOnNavigation:!0}),r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e(P)}}).$mount("#app")},"58b4":function(e,t,n){"use strict";var r=n("3b4c"),i=n.n(r);i.a},6675:function(e,t,n){},a179:function(e,t,n){},e810:function(e,t,n){"use strict";var r=n("a179"),i=n.n(r);i.a},fb98:function(e,t,n){}});
//# sourceMappingURL=app.b3900767.js.map